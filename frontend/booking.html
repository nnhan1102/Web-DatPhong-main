<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Đặt Tour - TourDuLich.com</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
    />
    <link rel="stylesheet" href="css/style.css" />
  </head>
  <body>
    <!-- Navigation (Same as index.html) -->
    <nav
      class="navbar navbar-expand-lg navbar-light bg-white shadow-sm fixed-top"
    >
      <div class="container">
        <a class="navbar-brand" href="index.html">
          <img
            src="images/logo.png"
            alt="Logo"
            height="40"
            class="d-inline-block align-text-top"
          />
          <span class="brand-text"
            >TourDuLich<span class="text-primary">.com</span></span
          >
        </a>
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarNav"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav me-auto">
            <li class="nav-item">
              <a class="nav-link" href="index.html">Trang chủ</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="tours.html">Tour du lịch</a>
            </li>
            <!-- Rest of navigation same as index.html -->
          </ul>
          <div class="d-flex">
            <a href="login.html" class="btn btn-outline-primary me-2">
              <i class="fas fa-sign-in-alt"></i> Đăng nhập
            </a>
            <a href="register.html" class="btn btn-primary">
              <i class="fas fa-user-plus"></i> Đăng ký
            </a>
          </div>
        </div>
      </div>
    </nav>

    <!-- Main Content -->
    <div class="container py-5" style="margin-top: 76px">
      <!-- Progress Steps -->
      <div class="row mb-5">
        <div class="col">
          <div class="progress-steps">
            <ul class="nav nav-pills justify-content-center">
              <li class="nav-item">
                <a class="nav-link active" href="#">
                  <span class="step-number">1</span>
                  <span class="step-text">Thông tin đặt tour</span>
                </a>
              </li>
              <li class="nav-item">
                <a class="nav-link disabled" href="#">
                  <span class="step-number">2</span>
                  <span class="step-text">Xác nhận thanh toán</span>
                </a>
              </li>
              <li class="nav-item">
                <a class="nav-link disabled" href="#">
                  <span class="step-number">3</span>
                  <span class="step-text">Hoàn tất đặt tour</span>
                </a>
              </li>
            </ul>
          </div>
        </div>
      </div>

      <div class="row">
        <!-- Left Column: Booking Form -->
        <div class="col-lg-8">
          <!-- Tour Summary -->
          <div class="card border-0 shadow-sm mb-4">
            <div class="card-body">
              <h5 class="card-title mb-3">Thông tin tour đã chọn</h5>
              <div class="row" id="selectedTourInfo">
                <div class="col-md-3">
                  <img
                    src=""
                    class="img-fluid rounded"
                    id="tourImage"
                    alt="Tour Image"
                    style="height: 120px; width: 100%; object-fit: cover"
                  />
                </div>
                <div class="col-md-9">
                  <h6 id="tourName">Đang tải...</h6>
                  <div class="row">
                    <div class="col-6">
                      <small class="text-muted d-block">
                        <i class="fas fa-map-marker-alt me-1"></i>
                        <span id="tourDestination">-</span>
                      </small>
                      <small class="text-muted d-block">
                        <i class="fas fa-clock me-1"></i>
                        <span id="tourDuration">-</span>
                      </small>
                    </div>
                    <div class="col-6">
                      <small class="text-muted d-block">
                        <i class="fas fa-calendar me-1"></i>
                        Khởi hành: <span id="tourDepartureDate">-</span>
                      </small>
                      <small class="text-muted d-block">
                        <i class="fas fa-users me-1"></i>
                        Số người: <span id="tourPeople">-</span>
                      </small>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Customer Information -->
          <div class="card border-0 shadow-sm mb-4">
            <div class="card-body">
              <h5 class="card-title mb-3">Thông tin khách hàng</h5>
              <form id="customerForm">
                <div class="row">
                  <div class="col-md-6 mb-3">
                    <label class="form-label"
                      >Họ và tên <span class="text-danger">*</span></label
                    >
                    <input
                      type="text"
                      class="form-control"
                      name="full_name"
                      required
                    />
                  </div>
                  <div class="col-md-6 mb-3">
                    <label class="form-label"
                      >Email <span class="text-danger">*</span></label
                    >
                    <input
                      type="email"
                      class="form-control"
                      name="email"
                      required
                    />
                  </div>
                  <div class="col-md-6 mb-3">
                    <label class="form-label"
                      >Điện thoại <span class="text-danger">*</span></label
                    >
                    <input
                      type="tel"
                      class="form-control"
                      name="phone"
                      required
                    />
                  </div>
                  <div class="col-md-6 mb-3">
                    <label class="form-label">Ngày sinh</label>
                    <input
                      type="date"
                      class="form-control"
                      name="date_of_birth"
                    />
                  </div>
                  <div class="col-md-6 mb-3">
                    <label class="form-label">Giới tính</label>
                    <select class="form-select" name="gender">
                      <option value="">Chọn giới tính</option>
                      <option value="male">Nam</option>
                      <option value="female">Nữ</option>
                      <option value="other">Khác</option>
                    </select>
                  </div>
                  <div class="col-md-6 mb-3">
                    <label class="form-label">CMND/CCCD</label>
                    <input
                      type="text"
                      class="form-control"
                      name="national_id"
                    />
                  </div>
                  <div class="col-12 mb-3">
                    <label class="form-label">Địa chỉ</label>
                    <input type="text" class="form-control" name="address" />
                  </div>
                </div>
              </form>
            </div>
          </div>

          <!-- Passenger Information -->
          <div class="card border-0 shadow-sm mb-4">
            <div class="card-body">
              <h5 class="card-title mb-3">Thông tin hành khách</h5>
              <div id="passengersInfo">
                <!-- Dynamic passenger forms will be added here -->
              </div>
              <div class="alert alert-info mt-3">
                <i class="fas fa-info-circle me-2"></i>
                Vui lòng điền đầy đủ thông tin cho từng hành khách theo số lượng
                đã chọn.
              </div>
            </div>
          </div>

          <!-- Special Requests -->
          <div class="card border-0 shadow-sm mb-4">
            <div class="card-body">
              <h5 class="card-title mb-3">Yêu cầu đặc biệt</h5>
              <div class="mb-3">
                <label class="form-label">Yêu cầu về bữa ăn</label>
                <div class="form-check">
                  <input
                    class="form-check-input"
                    type="checkbox"
                    value="vegetarian"
                    id="mealVegetarian"
                  />
                  <label class="form-check-label" for="mealVegetarian">
                    Ăn chay
                  </label>
                </div>
                <div class="form-check">
                  <input
                    class="form-check-input"
                    type="checkbox"
                    value="allergy"
                    id="mealAllergy"
                  />
                  <label class="form-check-label" for="mealAllergy">
                    Dị ứng thức ăn
                  </label>
                </div>
              </div>
              <div class="mb-3">
                <label class="form-label">Yêu cầu về phòng</label>
                <div class="form-check">
                  <input
                    class="form-check-input"
                    type="checkbox"
                    value="twin"
                    id="roomTwin"
                  />
                  <label class="form-check-label" for="roomTwin">
                    2 giường đơn
                  </label>
                </div>
                <div class="form-check">
                  <input
                    class="form-check-input"
                    type="checkbox"
                    value="extra"
                    id="roomExtra"
                  />
                  <label class="form-check-label" for="roomExtra">
                    Giường phụ
                  </label>
                </div>
              </div>
              <div class="mb-3">
                <label class="form-label">Ghi chú thêm</label>
                <textarea
                  class="form-control"
                  rows="3"
                  placeholder="Nhập yêu cầu đặc biệt khác (nếu có)..."
                  name="special_requests"
                ></textarea>
              </div>
            </div>
          </div>
        </div>

        <!-- Right Column: Order Summary -->
        <div class="col-lg-4">
          <!-- Order Summary Card -->
          <div class="card border-0 shadow-lg sticky-top" style="top: 90px">
            <div class="card-body p-4">
              <h5 class="card-title mb-4">Tóm tắt đơn hàng</h5>

              <!-- Price Breakdown -->
              <div class="price-breakdown mb-4">
                <div class="d-flex justify-content-between mb-2">
                  <span>Người lớn (<span id="orderAdults">0</span>x)</span>
                  <span id="orderAdultsPrice">0 VND</span>
                </div>
                <div class="d-flex justify-content-between mb-2">
                  <span>Trẻ em (<span id="orderChildren">0</span>x)</span>
                  <span id="orderChildrenPrice">0 VND</span>
                </div>
                <div class="d-flex justify-content-between mb-2">
                  <span>Em bé (<span id="orderInfants">0</span>x)</span>
                  <span id="orderInfantsPrice">0 VND</span>
                </div>
                <hr />
                <div class="d-flex justify-content-between mb-2">
                  <span>Tạm tính</span>
                  <span id="subtotal">0 VND</span>
                </div>
                <div class="d-flex justify-content-between mb-2">
                  <span>Phí dịch vụ</span>
                  <span>0 VND</span>
                </div>
                <div class="d-flex justify-content-between mb-2">
                  <span>Thuế VAT</span>
                  <span>0 VND</span>
                </div>
                <hr />
                <div class="d-flex justify-content-between fw-bold fs-5">
                  <span>Tổng cộng</span>
                  <span id="orderTotal">0 VND</span>
                </div>
              </div>

              <!-- Payment Method -->
              <div class="mb-4">
                <label class="form-label fw-bold">Phương thức thanh toán</label>
                <div class="payment-methods">
                  <div class="form-check mb-2">
                    <input
                      class="form-check-input"
                      type="radio"
                      name="paymentMethod"
                      id="cash"
                      value="cash"
                      checked
                    />
                    <label class="form-check-label" for="cash">
                      <i class="fas fa-money-bill-wave me-2"></i>Thanh toán tiền
                      mặt
                    </label>
                  </div>
                  <div class="form-check mb-2">
                    <input
                      class="form-check-input"
                      type="radio"
                      name="paymentMethod"
                      id="bankTransfer"
                      value="bank_transfer"
                    />
                    <label class="form-check-label" for="bankTransfer">
                      <i class="fas fa-university me-2"></i>Chuyển khoản ngân
                      hàng
                    </label>
                  </div>
                  <div class="form-check mb-2">
                    <input
                      class="form-check-input"
                      type="radio"
                      name="paymentMethod"
                      id="creditCard"
                      value="credit_card"
                    />
                    <label class="form-check-label" for="creditCard">
                      <i class="fas fa-credit-card me-2"></i>Thẻ tín dụng/ghi nợ
                    </label>
                  </div>
                  <div class="form-check">
                    <input
                      class="form-check-input"
                      type="radio"
                      name="paymentMethod"
                      id="momo"
                      value="momo"
                    />
                    <label class="form-check-label" for="momo">
                      <img
                        src="images/momo-logo.png"
                        height="20"
                        class="me-2"
                      />Ví MoMo
                    </label>
                  </div>
                </div>
              </div>

              <!-- Terms & Conditions -->
              <div class="form-check mb-4">
                <input
                  class="form-check-input"
                  type="checkbox"
                  id="agreeTerms"
                  required
                />
                <label class="form-check-label small" for="agreeTerms">
                  Tôi đồng ý với
                  <a href="terms.html" target="_blank">Điều khoản dịch vụ</a> và
                  <a href="privacy.html" target="_blank">Chính sách bảo mật</a>
                </label>
              </div>

              <!-- Action Buttons -->
              <div class="d-grid gap-2">
                <button class="btn btn-primary btn-lg" id="confirmBookingBtn">
                  <i class="fas fa-check-circle me-2"></i>Xác nhận đặt tour
                </button>
                <a href="tours.html" class="btn btn-outline-secondary">
                  <i class="fas fa-arrow-left me-2"></i>Quay lại
                </a>
              </div>

              <!-- Security Notice -->
              <div class="alert alert-light mt-4 mb-0 small">
                <i class="fas fa-shield-alt text-primary me-2"></i>
                Thông tin của bạn được bảo mật an toàn. Chúng tôi không lưu trữ
                thông tin thẻ tín dụng.
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Footer (Same as index.html) -->
    <footer class="bg-dark text-white py-5">
      <!-- Same footer as index.html -->
    </footer>

    <!-- Modal: Booking Success -->
    <div class="modal fade" id="successModal" tabindex="-1">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-body text-center p-5">
            <div class="mb-4">
              <div
                class="success-icon bg-success rounded-circle d-inline-flex align-items-center justify-content-center"
                style="width: 80px; height: 80px"
              >
                <i class="fas fa-check fa-2x text-white"></i>
              </div>
            </div>
            <h4 class="modal-title mb-3">Đặt tour thành công!</h4>
            <p class="mb-4">
              Cảm ơn bạn đã đặt tour. Chúng tôi sẽ liên hệ với bạn trong thời
              gian sớm nhất để xác nhận.
            </p>
            <div class="booking-info bg-light p-3 rounded mb-4">
              <p class="mb-2">
                <strong>Mã đặt tour:</strong> <span id="bookingCode">-</span>
              </p>
              <p class="mb-0">
                <strong>Tổng thanh toán:</strong>
                <span id="bookingTotal">-</span>
              </p>
            </div>
            <div class="d-grid gap-2">
              <button class="btn btn-primary" data-bs-dismiss="modal">
                <i class="fas fa-home me-2"></i>Về trang chủ
              </button>
              <button class="btn btn-outline-primary" id="printBookingBtn">
                <i class="fas fa-print me-2"></i>In phiếu đặt tour
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="js/api.js"></script>
    <script src="js/booking.js"></script>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const bookingManager = new BookingManager();
        bookingManager.init();
      });
    </script>
  </body>
</html>
