<!-- test-frontend-simple.html -->
<!DOCTYPE html>
<html>
  <head>
    <title>Test Frontend Register</title>
    <script>
      async function testRegister() {
        const timestamp = Date.now();
        const testData = {
          username: "test_" + timestamp,
          email: "test" + timestamp + "@example.com",
          password: "Test123!",
          full_name: "Test User " + timestamp,
          phone: "09" + Math.floor(Math.random() * 10000000 + 10000000),
          address: "123 Test Street",
        };

        console.log("Sending:", testData);

        try {
          const response = await fetch("../../backend/api/auth/register.php", {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
            },
            body: JSON.stringify(testData),
          });

          const result = await response.json();
          console.log("Response:", result);
          document.getElementById("result").innerHTML = `<pre>${JSON.stringify(
            result,
            null,
            2
          )}</pre>`;

          if (result.success) {
            alert("✅ Đăng ký thành công!");
          }
        } catch (error) {
          console.error("Error:", error);
          document.getElementById(
            "result"
          ).innerHTML = `<pre>Error: ${error.message}</pre>`;
        }
      }
    </script>
  </head>
  <body>
    <h2>Test Frontend Register</h2>
    <button onclick="testRegister()">Test Register API</button>
    <div
      id="result"
      style="margin-top: 20px; padding: 10px; background: #f5f5f5"
    ></div>

    <h3>Check current users in database:</h3>
    <pre id="users"></pre>

    <script>
      // Kiểm tra kết nối database
      async function checkUsers() {
        try {
          const response = await fetch("simple-register-test.php");
          const text = await response.text();
          document.getElementById("users").textContent = text;
        } catch (error) {
          console.error("Error checking users:", error);
        }
      }

      // Chạy khi trang load
      checkUsers();
    </script>
  </body>
</html>
